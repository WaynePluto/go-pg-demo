# 相关上下文

- internal/modules/iacc 目录下是身份与访问控制相关的代码，主要有用户、角色、权限三个主数据表，对于的type.go文件中定义了数据库表实体和对应接口的输入输出结构体，handler.go文件中定义了实现的接口对应的处理逻辑。

- pkgs/test_util.go 文件是一个测试工具包，提供了一些辅助函数用于在测试中创建用户、角色、权限等数据，以及获取访问令牌等功能，现在只实现了创建用户的逻辑。

# 需求
1. 完善测试工具包，补全创建角色、权限，关联用户、角色、权限的功能。
2. 实现一个接口权限校验的全局中间件，
- 接口从权限表中获取是否需要权限校验，如果权限表中查不到，则放行，查到了，再验证用户是否有对应的权限。
- 根据token获取用户的权限信息，并校验当前接口是否在用户权限范围内，若不在则拒绝访问。
- 注意权限表中的实现细节：在权限元数据中，存储的有接口的路径和请求方法，要求校验时同时匹配路径和请求方法。
- 匹配路由时，要从版本开始，比如 /v1/xxxx。
- 要求具体实现要遵守`promot/rules/middleware.md`内的规则。